KISSY.add("kg/effect-tabs/1.0.0/index",["node"],function(t,e,a,n){var o,c=e("node");o=function(e){var a,n,o,r=c.all,i={},l={},s=function(){try{if(window.localStorage&&null!==window.localStorage)return{save:function(t,e){"object"==typeof e&&(e=JSON.stringify(e));try{localStorage.setItem(t,e)}catch(a){"QUOTA_EXCEEDED_ERR"===a&&(localStorage.clear(),localStorage.setItem(t,e))}},load:function(t){try{return JSON.parse(localStorage.getItem(t))}catch(e){return localStorage.getItem(t)}},del:function(t){localStorage.removeItem(t)}}}catch(t){return{save:function(){return null},load:function(){return null},del:function(){return null}}}return null}(),f=function(){if("hash"===i.type&&(a=location.hash),"storage"===i.type&&(a=s.load(location.hostname+"__effectTabsPosition")),a){if(a=a.split("|"),a.length>1)for(n=1;n<a.length;n+=1)o=a[n].split(":"),l[decodeURIComponent(o[0])]=decodeURIComponent(o[1]);a=""}},u=function(e,a){i=t.merge({type:"hash",onChange:null},a),this.container=r(e)};return u.prototype={init:function(){var t,e,n,o=this.container,c=o.all(".effectTabs__tab"),u=o.all(".effectTabs__item"),_=o.all(".effectTabs__placeholder"),d=o.attr("data-name");c.each(function(){t=r(this),n="Button__"+d+"__"+t.attr("data-target"),t.prop("id",n)}),u.each(function(){t=r(this),n="Tab__"+d+"__"+t.attr("data-name"),t.prop("id",n)}),c.on("click",function(t){t.preventDefault(),h(r(this).attr("data-target"))}),c.on("mouseenter",function(){p(r(this).attr("data-target"))}),c.on("mouseleave",function(){e&&p(e)});var h=function(t){t=decodeURIComponent(t),n="#Button__"+d+"__"+t,r(n).addClass("effectTabs__tab_state_active").siblings().removeClass("effectTabs__tab_state_active"),n="#Tab__"+d+"__"+t,r(n).addClass("effectTabs__item_state_active").siblings().removeClass("effectTabs__item_state_active"),g(t),p(t),e=t,"function"==typeof i.onChange&&i.onChange({group:d,tab:t,tabId:n})},g=function(t){var e;l[d]=t,a="tabs";for(e in l)l.hasOwnProperty(e)&&(a+="|"+encodeURIComponent(e)+":"+encodeURIComponent(l[e]));"hash"===i.type&&(location.hash=a),"storage"===i.type&&s.save(location.hostname+"__effectTabsPosition",a)},p=function(t){var e=left=0;c.each(function(a){a.attr("data-target")==t&&(e=a.outerWidth(),left=a.offset().left-o.offset().left)}),_.css({width:e,left:left})};f(),h(l[d]?l[d]:c.item(0).attr("data-target")),this.setTab=function(t){h(t)}}},e=u}(),n.exports=o});